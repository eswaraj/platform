<f:view xmlns="http://www.w3c.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:ng="http://xmlns.jcp.org/jsf/passthrough" xmlns:p="http://primefaces.org/ui">
	<h:head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>

		<style>
.topAlignPanelColumns td {
	vertical-align: top;
}

.pf-dock-container-top {
	background-image: none;
	background-color: white;
}

.ui-dock-item-top {
	color: black;
}

.ui-dock-container-top {
	color: black;
}

.ui-selectonemenu {
	width: 100px;
}

.ui-widget, .ui-widget .ui-widget {
	font-size: 95% !important;
}

.ui-tree {
	min-height: 595px;
}
</style>
	</h:head>
	<h:body>
		<ui:include src="admin_menu.xhtml" />
		<h:form id="location_form">
			<p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />
			<p:panel id="mainPanel" header="Location">
				<h:panelGrid columns="8" id="buttonPanel">
				</h:panelGrid>
				<h:panelGrid columns="2" styleClass="topAlignPanelColumns">
					<h:panelGrid columns="2" styleClass="topAlignPanelColumns">
						<p:outputPanel id="treeView">
							<p:tabView id="tabPanel">
								<p:tab title="Browse">
									<p:scrollPanel mode="native" style="width:300px;height:600px;">
										<p:tree value="#{politicalAdminBean.root}" id="doc" var="doc" dynamic="true" selectionMode="single"
											selection="#{politicalAdminBean.selectedNode}">
											<p:ajax event="expand" update=":location_form:messages" listener="#{politicalAdminBean.onNodeExpand}" />
											<p:ajax event="collapse" update=":location_form:messages" listener="#{politicalAdminBean.onNodeCollapse}" />
											<p:ajax event="select"
												update=":location_form:formView,:location_form:buttonPanel"
												listener="#{politicalAdminBean.onNodeSelect}" />
											<p:ajax event="unselect" update=":location_form:formView" listener="#{politicalAdminBean.onNodeUnselect}" />

											<p:treeNode expandedIcon="ui-icon-folder-open" collapsedIcon="ui-icon-folder-collapsed">
												<h:outputText value="#{doc.name}" />
											</p:treeNode>
											<p:treeNode type="document" icon="ui-icon-document">
												<h:outputText value="#{doc.name}" />
											</p:treeNode>
											<p:treeNode type="picture" icon="ui-icon-image">
												<h:outputText value="#{doc.name}" />
											</p:treeNode>
											<p:treeNode type="mp3" icon="ui-icon-video">
												<h:outputText value="#{doc.name}" />
											</p:treeNode>
										</p:tree>
									</p:scrollPanel>
								</p:tab>
								<p:tab title="Search">
									<p:outputLabel value="Pojo:" for="themePojo" />
									<p:autoComplete id="themePojo" value="#{politicalAdminBean.selectedLocationSearchResult}"
										completeMethod="#{politicalAdminBean.searchLocation}" var="oneLocation" itemLabel="#{oneLocation.location.name}-#{oneLocation.locationType.name}"
										itemValue="#{oneLocation}" converter="#{locationSearchResultConvertor}" forceSelection="true" />

								</p:tab>
							</p:tabView>

							<p:blockUI block="@form" trigger="@form:tabPanel:doc">LOADING<br />
								<p:graphicImage width="80"
									value="https://d13yacurqjgara.cloudfront.net/users/157197/screenshots/968023/framely.gif" />
							</p:blockUI>
						</p:outputPanel>
						<p:outputPanel id="formView">
							<p:outputPanel rendered="#{not empty politicalAdminBean.selectedNode}">

								<h:panelGrid columns="2">
									<p:outputLabel value="Name"></p:outputLabel>
									<p:inputText id="name" value="#{politicalAdminBean.selectedLocationNode.data.location.name}" style="width:200px" />

									<p:outputLabel value="URL Identifier"></p:outputLabel>
									<p:inputText disabled="true" id="urlId"
										value="#{politicalAdminBean.selectedLocationNode.data.location.urlIdentifier}" style="width:200px" />

									<p:outputLabel value="Latitude"></p:outputLabel>
									<p:inputText disabled="true" id="latitude" value="#{politicalAdminBean.selectedLocationNode.data.location.latitude}"
										style="width:200px" />

									<p:outputLabel value="Longitude"></p:outputLabel>
									<p:inputText disabled="true" id="longitude"
										value="#{politicalAdminBean.selectedLocationNode.data.location.longitude}" style="width:200px" />

									<p:outputLabel value="Depth"></p:outputLabel>
									<p:inputText disabled="true" id="depth" value="#{politicalAdminBean.selectedLocationNode.data.location.depth}"
										style="width:200px" />

								</h:panelGrid>
								<h:panelGrid columns="6" id="saveCancelButtonPanel">
									<p:commandButton id="saveLocation" value="Save" update="@form" actionListener="#{politicalAdminBean.saveLocation}"
										styleClass="ui-priority-primary">
									</p:commandButton>
									<p:commandButton id="cancel" value="Cancel" update="@form" actionListener="#{politicalAdminBean.cancel}"
										styleClass="ui-priority-primary">
									</p:commandButton>
									<p:blockUI block="@form" trigger="saveLocation">Saving<br />
										<p:graphicImage width="80"
											value="https://d13yacurqjgara.cloudfront.net/users/157197/screenshots/968023/framely.gif" />
									</p:blockUI>

								</h:panelGrid>
								
							</p:outputPanel>
						</p:outputPanel>
					</h:panelGrid>
				</h:panelGrid>

			</p:panel>
		</h:form>
	</h:body>
</f:view>
